<script type='text/stache' id='app-view'>
  {{#if sessionPromise.value}}

    <p class="welcome-message">
      Welcome {{sessionPromise.value.user.email}}.
      <a href="javascript://" ($click)="logOut()">log out</a>
    </p>

  {{else}}
    {{#eq page "signup"}}

      <form ($submit)="signUp(%event)">
        <h2>Sign Up</h2>

        <input placeholder='email' {^$value}="email"/>

        <input type='password'
             placeholder='password' {^$value}="password"/>

        <button>Sign Up</button>

        <aside>
          Have an account?
          <a href="javascript://" ($click)="gotoLogIn()">Log in</a>
        </aside>
      </form>

    {{else}}

      <form ($submit)="logIn(%event)">
        <h2>Log In</h2>

        <input placeholder='email' {^$value}="email"/>

        <input type='password'
           placeholder='password' {^$value}="password"/>

        <button>Log In</button>

		{{#if logInError}}
          <div class='error'>{{logInError.message}}</div>
        {{/if}}

        <aside>
          Don't have an account?
          <a href="javascript://" ($click)="gotoSignUp()">Sign up</a>
        </aside>
      </form>

    {{/eq}}

  {{/if}}
</script>
